import requests
import json

# Set your ServiceNow instance URL, username, and password
instance = 'your_instance_url'
username = 'your_username'
password = 'your_password'

# Set the incident number you want to update
incident_number = 'INC0012345'

# Set the API endpoint
url = f'https://{instance}/api/now/table/incident/{incident_number}'

# Set headers
headers = {
    'Accept': 'application/json',
    'Content-Type': 'application/json',
}

# Set data for updating the incident
update_data = {
    'state': 3,  # Resolved state
    'close_notes': 'Incident resolved.',
}

# Set proxy settings if needed
proxies = {
    'http': 'http://your_proxy_server',
    'https': 'https://your_proxy_server',
}

# Update the incident
response = requests.put(url, auth=(username, password), headers=headers, data=json.dumps(update_data), proxies=proxies)

# Check if the request was successful
if response.status_code == 200:
    print(f"Incident {incident_number} has been resolved.")
else:
    print(f"Failed to resolve incident {incident_number}. Status code: {response.status_code}, Response: {response.text}")
