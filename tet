import javax.security.auth.login.AppConfigurationEntry;
import javax.security.auth.login.Configuration;
import java.util.HashMap;
import java.util.Map;

public class CustomKrb5Configuration extends Configuration {

    private final String krb5ConfPath;
    private final String jaasConfPath;

    public CustomKrb5Configuration(String krb5ConfPath, String jaasConfPath) {
        this.krb5ConfPath = krb5ConfPath;
        this.jaasConfPath = jaasConfPath;
    }

    @Override
    public AppConfigurationEntry[] getAppConfigurationEntry(String name) {
        System.setProperty("java.security.krb5.conf", krb5ConfPath);
        System.setProperty("java.security.auth.login.config", jaasConfPath);

        Map<String, String> options = new HashMap<>();
        options.put("useKeyTab", "true");
        options.put("storeKey", "true");
        options.put("doNotPrompt", "true");
        options.put("keyTab", "/path/to/keytab");
        options.put("principal", "principal@YOUR_REALM");
        options.put("refreshKrb5Config", "true");

        return new AppConfigurationEntry[]{
                new AppConfigurationEntry("com.sun.security.auth.module.Krb5LoginModule",
                        AppConfigurationEntry.LoginModuleControlFlag.REQUIRED,
                        options)
        };
    }
}
