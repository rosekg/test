import requests

# ServiceNow instance details
instance_url = "https://your_instance.service-now.com"
username = "your_username"
password = "your_password"

# Ticket details
sys_id = "your_ticket_sys_id"
resolution_type = "Resolved"
resolution_code = "Closed"
resolution_notes = "Ticket resolved successfully"
request_type = "Incident"  # Replace with the appropriate request type

# API endpoint for updating an incident (change 'incident' to the appropriate table name)
api_endpoint = f"{instance_url}/api/now/table/incident/{sys_id}"

# Set up the request headers
headers = {
    "Content-Type": "application/json",
    "Accept": "application/json",
}

# Set up the request payload with the fields to be updated
payload = {
    "resolution_type": resolution_type,
    "resolution_code": resolution_code,
    "resolution_notes": resolution_notes,
    "request_type": request_type,
}

# Make the PUT request to update the ticket
response = requests.put(api_endpoint, auth=(username, password), headers=headers, json=payload)

# Check the response status
if response.status_code == 200:
    print(f"Ticket {sys_id} updated successfully.")
else:
    print(f"Failed to update ticket {sys_id}. Status code: {response.status_code}")
    print(response.text)

