import pandas as pd
from jira import JIRA

# Set your Jira Cloud credentials and Jira URL
jira_url = 'your_jira_url'
username = 'your_username'
api_token = 'your_api_token'

# Authenticate with Jira Cloud
jira = JIRA(jira_url, basic_auth=(username, api_token))

# Read the CSV file
data = pd.read_csv('your_csv_file.csv')

# Iterate over each row in the CSV file
for index, row in data.iterrows():
    # Create a new issue in Jira
    issue_dict = {
        'project': {'key': 'your_project_key'},
        'summary': row['summary'],
        'description': row['description'],
        'issuetype': {'name': 'Task'},
        'assignee': {'name': row['assignee']},
    }
    new_issue = jira.create_issue(fields=issue_dict)

    # Transition the issue to 'Action In Progress'
    jira.transition_issue(new_issue, '31')  # ID for 'Action In Progress' status

    # Transition the issue to 'Done'
    jira.transition_issue(new_issue, '41')  # ID for 'Done' status

    print(f"Created issue {new_issue.key} and transitioned it to 'Done'")
